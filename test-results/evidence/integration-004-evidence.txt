=== Google Drive Sync Service Implementation ===

Task: integration-004
Date: Sun Jan 25 00:20:21 PST 2026

=== Created File ===
internal/application/integration/drive_sync_service.go

=== Build Verification ===
Build: SUCCESS

=== Go Vet ===
Vet: SUCCESS

=== Service Functions ===
func DefaultSyncConfig() SyncConfig {
func NewDriveSyncService(entClient *ent.Client, oauthCfg *google.Config, config SyncConfig) *DriveSyncService {
func NewDriveSyncServiceWithDefaults(entClient *ent.Client, oauthCfg *google.Config) *DriveSyncService {
func (s *DriveSyncService) SyncFolder(ctx context.Context, connectionID, folderID string, syncType string) (*SyncResult, error) {
func (s *DriveSyncService) SyncFolderWithProgress(ctx context.Context, connectionID, folderID string, syncType string, progressCb SyncProgressCallback) (*SyncResult, error) {
func (s *DriveSyncService) performFullSync(ctx context.Context, driveClient *google.DriveClient, syncRecord *ent.GoogleDriveSync, folder *ent.GoogleDriveFolder, progressCb SyncProgressCallback) (*SyncResult, error) {
func (s *DriveSyncService) performIncrementalSync(ctx context.Context, driveClient *google.DriveClient, syncRecord *ent.GoogleDriveSync, folder *ent.GoogleDriveFolder, progressCb SyncProgressCallback) (*SyncResult, error) {
func (s *DriveSyncService) scanFolderRecursive(ctx context.Context, driveClient *google.DriveClient, folderID, folderPath string, result *SyncResult, progressCb SyncProgressCallback) error {
func (s *DriveSyncService) isReceiptFile(file *google.DriveFile) bool {
func (s *DriveSyncService) failSync(ctx context.Context, syncRecord *ent.GoogleDriveSync, err error) (*SyncResult, error) {
func (s *DriveSyncService) CancelSync(connectionID string) error {
func (s *DriveSyncService) GetSyncStatus(ctx context.Context, syncID string) (*SyncResult, error) {
func (s *DriveSyncService) GetSyncHistory(ctx context.Context, connectionID string, limit int) ([]*SyncResult, error) {
func (s *DriveSyncService) GetActiveSyncs() []string {
func (s *DriveSyncService) ExtractReceiptsFromFolder(ctx context.Context, connectionID, driveFolderID string) ([]ExtractedReceipt, error) {
func (s *DriveSyncService) DownloadReceipt(ctx context.Context, connectionID, fileID string) (io.ReadCloser, *google.DriveFile, error) {
func (s *DriveSyncService) SyncAllConnections(ctx context.Context, syncType string) ([]*SyncResult, error) {
func (s *DriveSyncService) UpdateSyncProgress(ctx context.Context, syncID string, progress SyncProgress) error {
func isValidSyncType(syncType string) bool {
func NewSyncStatusTracker(service *DriveSyncService) *SyncStatusTracker {
func (t *SyncStatusTracker) Watch(syncID string) <-chan SyncProgress {
func (t *SyncStatusTracker) Unwatch(syncID string, ch <-chan SyncProgress) {
func (t *SyncStatusTracker) Notify(progress SyncProgress) {
func (t *SyncStatusTracker) CleanupWatchers(syncID string) {

=== Line Count ===
     946 /Users/thedjpetersen/code/ralph/internal/application/integration/drive_sync_service.go
